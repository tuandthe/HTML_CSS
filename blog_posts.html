<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS_08: Blog Posts Load More</title>
    <style>
        /* --- CSS Giao diện --- */
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0f2f5;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        /* Style cho từng bài viết (Card) */
        .post-card {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }

        .post-card:hover {
            transform: translateY(-3px);
        }

        .post-title {
            margin-top: 0;
            color: #2980b9;
            font-size: 1.2rem;
            text-transform: capitalize;
        }

        .post-body {
            color: #555;
            line-height: 0;
        }

        /* Khu vực nút bấm và thông báo */
        .controls {
            text-align: center;
            margin-top: 30px;
            margin-bottom: 50px;
        }

        #load-more-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }

        #load-more-btn:hover {
            background-color: #2980b9;
        }

        #load-more-btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        .status-msg {
            margin-top: 15px;
            font-style: italic;
            color: #7f8c8d;
            font-weight: bold;
        }

        .error {
            color: #e74c3c;
        }
    </style>
</head>

<body>

    <h1>Danh sách bài viết mới</h1>

    <div id="post-lists">
    </div>

    <div class="controls">
        <button id="load-more-btn">
            <span class="spinner"></span> Tải thêm bài viết
        </button>
        <p id="status-text" class="status-msg"></p>
    </div>
    <script>
        let postList = [];
        let currentPage = 0;
        let postsPerPage = 5;
        const statusText = document.getElementById('status-text');
        async function fetchPosts() {
            try {
                const response = await fetch(`https://jsonplaceholder.typicode.com/posts`);
                if (!response.ok) {
                    throw new Error('Lỗi khi tải bài viết');
                }
                postList = await response.json();
                renderPosts(postList);

            } catch (error) {
                console.error('Error fetching posts:', error);
                statusText.textContent = 'Đã xảy ra lỗi khi tải bài viết.';
            }

        }
        function renderPosts(posts) {
            const nextPosts = posts.slice(currentPage, currentPage + postsPerPage);
            const postListContainer = document.getElementById('post-lists');
            nextPosts.forEach(post => {
                const postCard = document.createElement('div');
                postCard.className = 'post-card';

                const postBody = document.createElement('h2');
                postBody.className = 'post-body';
                postBody.textContent = post.id;

                const postTitle = document.createElement('p');
                postTitle.className = 'post-title';
                postTitle.textContent = post.title;


                postCard.appendChild(postBody);
                postCard.appendChild(postTitle);

                postListContainer.appendChild(postCard);
            });
            currentPage += postsPerPage;
            if (currentPage >= posts.length) {
                document.getElementById('load-more-btn').disabled = true;
                statusText.textContent = 'Đã tải hết tất cả bài viết.';
            } else {
                statusText.textContent = '';
            }
        }
        document.getElementById('load-more-btn').addEventListener('click', () => {
            renderPosts(postList);
        });
        fetchPosts()


    </script>
</body>

</html>